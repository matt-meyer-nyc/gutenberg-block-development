{"version":3,"sources":["@wordpress/block-editor/src/components/block-actions/index.js"],"names":["BlockActions","canDuplicate","canInsertDefaultBlock","children","isLocked","onDuplicate","onGroup","onInsertAfter","onInsertBefore","onRemove","onUngroup","select","props","canInsertBlockType","getBlockRootClientId","getBlocksByClientId","getTemplateLock","getDefaultBlockName","blocks","clientIds","rootClientId","block","name","extraProps","dispatch","removeBlocks","replaceBlocks","duplicateBlocks","insertAfterBlock","insertBeforeBlock","length","getGroupingBlockName","groupingBlockName","newBlocks","innerBlocks"],"mappings":";;;;;;;AAGA;;AAKA;;AACA;;AACA;;AAVA;;;;AAKA;;;AAOA,SAASA,YAAT,OAWI;AAAA,MAVHC,YAUG,QAVHA,YAUG;AAAA,MATHC,qBASG,QATHA,qBASG;AAAA,MARHC,QAQG,QARHA,QAQG;AAAA,MAPHC,QAOG,QAPHA,QAOG;AAAA,MANHC,WAMG,QANHA,WAMG;AAAA,MALHC,OAKG,QALHA,OAKG;AAAA,MAJHC,aAIG,QAJHA,aAIG;AAAA,MAHHC,cAGG,QAHHA,cAGG;AAAA,MAFHC,QAEG,QAFHA,QAEG;AAAA,MADHC,SACG,QADHA,SACG;AACH,SAAOP,QAAQ,CAAE;AAChBF,IAAAA,YAAY,EAAZA,YADgB;AAEhBC,IAAAA,qBAAqB,EAArBA,qBAFgB;AAGhBE,IAAAA,QAAQ,EAARA,QAHgB;AAIhBC,IAAAA,WAAW,EAAXA,WAJgB;AAKhBC,IAAAA,OAAO,EAAPA,OALgB;AAMhBC,IAAAA,aAAa,EAAbA,aANgB;AAOhBC,IAAAA,cAAc,EAAdA,cAPgB;AAQhBC,IAAAA,QAAQ,EAARA,QARgB;AAShBC,IAAAA,SAAS,EAATA;AATgB,GAAF,CAAf;AAWA;;eAEc,sBAAS,CACvB,sBAAY,UAAEC,MAAF,EAAUC,KAAV,EAAqB;AAAA,gBAM5BD,MAAM,CAAE,mBAAF,CANsB;AAAA,MAE/BE,kBAF+B,WAE/BA,kBAF+B;AAAA,MAG/BC,oBAH+B,WAG/BA,oBAH+B;AAAA,MAI/BC,mBAJ+B,WAI/BA,mBAJ+B;AAAA,MAK/BC,eAL+B,WAK/BA,eAL+B;;AAAA,iBAOAL,MAAM,CAAE,aAAF,CAPN;AAAA,MAOxBM,mBAPwB,YAOxBA,mBAPwB;;AAShC,MAAMC,MAAM,GAAGH,mBAAmB,CAAEH,KAAK,CAACO,SAAR,CAAlC;AACA,MAAMC,YAAY,GAAGN,oBAAoB,CAAEF,KAAK,CAACO,SAAN,CAAiB,CAAjB,CAAF,CAAzC;AACA,MAAMlB,YAAY,GAAG,mBAAOiB,MAAP,EAAe,UAAEG,KAAF,EAAa;AAChD,WACC,CAAC,CAAEA,KAAH,IACA,6BAAiBA,KAAK,CAACC,IAAvB,EAA6B,UAA7B,EAAyC,IAAzC,CADA,IAEAT,kBAAkB,CAAEQ,KAAK,CAACC,IAAR,EAAcF,YAAd,CAHnB;AAKA,GANoB,CAArB;AAQA,MAAMlB,qBAAqB,GAAGW,kBAAkB,CAC/CI,mBAAmB,EAD4B,EAE/CG,YAF+C,CAAhD;AAKA,SAAO;AACNF,IAAAA,MAAM,EAANA,MADM;AAENjB,IAAAA,YAAY,EAAZA,YAFM;AAGNC,IAAAA,qBAAqB,EAArBA,qBAHM;AAINqB,IAAAA,UAAU,EAAEX,KAJN;AAKNR,IAAAA,QAAQ,EAAE,CAAC,CAAEY,eAAe,CAAEI,YAAF,CALtB;AAMNA,IAAAA,YAAY,EAAZA;AANM,GAAP;AAQA,CAhCD,CADuB,EAkCvB,wBAAc,UAAEI,QAAF,EAAYZ,KAAZ,SAAmC;AAAA,MAAdD,MAAc,SAAdA,MAAc;AAAA,MACxCQ,SADwC,GAClBP,KADkB,CACxCO,SADwC;AAAA,MAC7BD,MAD6B,GAClBN,KADkB,CAC7BM,MAD6B;;AAAA,kBAS5CM,QAAQ,CAAE,mBAAF,CAToC;AAAA,MAI/CC,YAJ+C,aAI/CA,YAJ+C;AAAA,MAK/CC,aAL+C,aAK/CA,aAL+C;AAAA,MAM/CC,eAN+C,aAM/CA,eAN+C;AAAA,MAO/CC,gBAP+C,aAO/CA,gBAP+C;AAAA,MAQ/CC,iBAR+C,aAQ/CA,iBAR+C;;AAWhD,SAAO;AACNxB,IAAAA,WADM,yBACQ;AACb,aAAOsB,eAAe,CAAER,SAAF,CAAtB;AACA,KAHK;AAINV,IAAAA,QAJM,sBAIK;AACVgB,MAAAA,YAAY,CAAEN,SAAF,CAAZ;AACA,KANK;AAONX,IAAAA,cAPM,4BAOW;AAChBqB,MAAAA,iBAAiB,CAAE,mBAAO,uBAAWV,SAAX,CAAP,CAAF,CAAjB;AACA,KATK;AAUNZ,IAAAA,aAVM,2BAUU;AACfqB,MAAAA,gBAAgB,CAAE,kBAAM,uBAAWT,SAAX,CAAN,CAAF,CAAhB;AACA,KAZK;AAaNb,IAAAA,OAbM,qBAaI;AACT,UAAK,CAAEY,MAAM,CAACY,MAAd,EAAuB;AACtB;AACA;;AAHQ,qBAKwBnB,MAAM,CAAE,aAAF,CAL9B;AAAA,UAKDoB,oBALC,YAKDA,oBALC;;AAOT,UAAMC,iBAAiB,GAAGD,oBAAoB,EAA9C,CAPS,CAST;;AACA,UAAME,SAAS,GAAG,+BACjBf,MADiB,EAEjBc,iBAFiB,CAAlB;;AAKA,UAAK,CAAEC,SAAP,EAAmB;AAClB;AACA;;AACDP,MAAAA,aAAa,CAAEP,SAAF,EAAac,SAAb,CAAb;AACA,KAhCK;AAkCNvB,IAAAA,SAlCM,uBAkCM;AACX,UAAK,CAAEQ,MAAM,CAACY,MAAd,EAAuB;AACtB;AACA;;AAED,UAAMI,WAAW,GAAGhB,MAAM,CAAE,CAAF,CAAN,CAAYgB,WAAhC;;AAEA,UAAK,CAAEA,WAAW,CAACJ,MAAnB,EAA4B;AAC3B;AACA;;AAEDJ,MAAAA,aAAa,CAAEP,SAAF,EAAae,WAAb,CAAb;AACA;AA9CK,GAAP;AAgDA,CA3DD,CAlCuB,CAAT,EA8FVlC,YA9FU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { castArray, first, last, every } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { hasBlockSupport, switchToBlockType } from '@wordpress/blocks';\n\nfunction BlockActions( {\n\tcanDuplicate,\n\tcanInsertDefaultBlock,\n\tchildren,\n\tisLocked,\n\tonDuplicate,\n\tonGroup,\n\tonInsertAfter,\n\tonInsertBefore,\n\tonRemove,\n\tonUngroup,\n} ) {\n\treturn children( {\n\t\tcanDuplicate,\n\t\tcanInsertDefaultBlock,\n\t\tisLocked,\n\t\tonDuplicate,\n\t\tonGroup,\n\t\tonInsertAfter,\n\t\tonInsertBefore,\n\t\tonRemove,\n\t\tonUngroup,\n\t} );\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tcanInsertBlockType,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlocksByClientId,\n\t\t\tgetTemplateLock,\n\t\t} = select( 'core/block-editor' );\n\t\tconst { getDefaultBlockName } = select( 'core/blocks' );\n\n\t\tconst blocks = getBlocksByClientId( props.clientIds );\n\t\tconst rootClientId = getBlockRootClientId( props.clientIds[ 0 ] );\n\t\tconst canDuplicate = every( blocks, ( block ) => {\n\t\t\treturn (\n\t\t\t\t!! block &&\n\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t\t);\n\t\t} );\n\n\t\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t);\n\n\t\treturn {\n\t\t\tblocks,\n\t\t\tcanDuplicate,\n\t\t\tcanInsertDefaultBlock,\n\t\t\textraProps: props,\n\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\trootClientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, props, { select } ) => {\n\t\tconst { clientIds, blocks } = props;\n\n\t\tconst {\n\t\t\tremoveBlocks,\n\t\t\treplaceBlocks,\n\t\t\tduplicateBlocks,\n\t\t\tinsertAfterBlock,\n\t\t\tinsertBeforeBlock,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tonDuplicate() {\n\t\t\t\treturn duplicateBlocks( clientIds );\n\t\t\t},\n\t\t\tonRemove() {\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t},\n\t\t\tonInsertBefore() {\n\t\t\t\tinsertBeforeBlock( first( castArray( clientIds ) ) );\n\t\t\t},\n\t\t\tonInsertAfter() {\n\t\t\t\tinsertAfterBlock( last( castArray( clientIds ) ) );\n\t\t\t},\n\t\t\tonGroup() {\n\t\t\t\tif ( ! blocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { getGroupingBlockName } = select( 'core/blocks' );\n\n\t\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t\t// Activate the `transform` on `core/group` which does the conversion\n\t\t\t\tconst newBlocks = switchToBlockType(\n\t\t\t\t\tblocks,\n\t\t\t\t\tgroupingBlockName\n\t\t\t\t);\n\n\t\t\t\tif ( ! newBlocks ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t\t},\n\n\t\t\tonUngroup() {\n\t\t\t\tif ( ! blocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\n\n\t\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t\t},\n\t\t};\n\t} ),\n] )( BlockActions );\n"]}