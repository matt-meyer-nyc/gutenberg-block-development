{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.js"],"names":["classnames","first","last","omit","animated","useRef","useEffect","useLayoutEffect","useState","useContext","focus","isTextField","placeCaretAtHorizontalEdge","BACKSPACE","DELETE","ENTER","getBlockType","getSaveElement","isReusableBlock","isUnmodifiedDefaultBlock","getUnregisteredTypeHandlerName","withFilters","__","sprintf","withDispatch","withSelect","useSelect","withViewportMatch","compose","pure","ifCondition","BlockEdit","BlockInvalidWarning","BlockCrashWarning","BlockCrashBoundary","BlockHtml","isInsideRootBlock","useMovingAnimation","Context","BlockNodes","BlockListBlock","mode","isFocusMode","isLocked","clientId","isSelected","isMultiSelected","isPartOfMultiSelection","isFirstMultiSelected","isLastMultiSelected","isTypingWithinBlock","isEmptyDefaultBlock","isAncestorOfSelectedBlock","isSelectionEnabled","className","name","isValid","attributes","initialPosition","wrapperProps","setAttributes","onReplace","onInsertBlocksAfter","onMerge","onRemove","onInsertDefaultBlockAfter","toggleSelection","animateOnChange","enableAnimation","isNavigationMode","isMultiSelecting","hasSelectedUI","onSelectionStart","setBlockNodes","select","isDraggingBlocks","wrapper","node","current","nodes","hasError","setErrorState","onBlockError","blockType","blockLabel","title","focusTabbable","ignoreInnerBlocks","contains","document","activeElement","textInputs","tabbable","find","filter","isReverse","target","isMounting","animationStyle","onKeyDown","event","keyCode","preventDefault","onMouseLeave","which","buttons","isUnregisteredBlock","showEmptyBlockSideInserter","shouldAppearSelected","isDragging","getEditWrapperProps","isAligned","wrapperClassName","blockElementId","blockEdit","undefined","display","style","applyWithSelect","rootClientId","isLargeViewport","isBlockSelected","isAncestorMultiSelected","isBlockMultiSelected","isFirstMultiSelectedBlock","getLastMultiSelectedBlockClientId","isTyping","getBlockMode","getSelectedBlocksInitialCaretPosition","getSettings","hasSelectedInnerBlock","getTemplateLock","__unstableGetBlockWithoutInnerBlocks","block","focusMode","isRTL","templateLock","checkDeep","applyWithDispatch","dispatch","ownProps","updateBlockAttributes","insertBlocks","insertDefaultBlock","removeBlock","mergeBlocks","replaceBlocks","__unstableMarkLastChangeAsPersistent","newAttributes","onInsertBlocks","blocks","index","getBlockIndex","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","indexToSelect","length","selectionEnabled"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { first, last, omit } from 'lodash';\nimport { animated } from 'react-spring/web.cjs';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseState,\n\tuseContext,\n} from '@wordpress/element';\nimport { focus, isTextField, placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { BACKSPACE, DELETE, ENTER } from '@wordpress/keycodes';\nimport {\n\tgetBlockType,\n\tgetSaveElement,\n\tisReusableBlock,\n\tisUnmodifiedDefaultBlock,\n\tgetUnregisteredTypeHandlerName,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { withDispatch, withSelect, useSelect } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { compose, pure, ifCondition } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { isInsideRootBlock } from '../../utils/dom';\nimport useMovingAnimation from './moving-animation';\nimport { Context, BlockNodes } from './root-container';\n\nfunction BlockListBlock( {\n\tmode,\n\tisFocusMode,\n\tisLocked,\n\tclientId,\n\tisSelected,\n\tisMultiSelected,\n\tisPartOfMultiSelection,\n\tisFirstMultiSelected,\n\tisLastMultiSelected,\n\tisTypingWithinBlock,\n\tisEmptyDefaultBlock,\n\tisAncestorOfSelectedBlock,\n\tisSelectionEnabled,\n\tclassName,\n\tname,\n\tisValid,\n\tattributes,\n\tinitialPosition,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\tonRemove,\n\tonInsertDefaultBlockAfter,\n\ttoggleSelection,\n\tanimateOnChange,\n\tenableAnimation,\n\tisNavigationMode,\n\tisMultiSelecting,\n\thasSelectedUI = true,\n} ) {\n\tconst onSelectionStart = useContext( Context );\n\tconst [ , setBlockNodes ] = useContext( BlockNodes );\n\t// In addition to withSelect, we should favor using useSelect in this component going forward\n\t// to avoid leaking new props to the public API (editor.BlockListBlock filter)\n\tconst { isDraggingBlocks } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tisDraggingBlocks: select( 'core/block-editor' ).isDraggingBlocks(),\n\t\t};\n\t}, [] );\n\n\t// Reference of the wrapper\n\tconst wrapper = useRef( null );\n\n\t// Provide the selected node, or the first and last nodes of a multi-\n\t// selection, so it can be used to position the contextual block toolbar.\n\t// We only provide what is necessary, and remove the nodes again when they\n\t// are no longer selected.\n\tuseLayoutEffect( () => {\n\t\tif ( isSelected || isFirstMultiSelected || isLastMultiSelected ) {\n\t\t\tconst node = wrapper.current;\n\t\t\tsetBlockNodes( ( nodes ) => ( { ...nodes, [ clientId ]: node } ) );\n\t\t\treturn () => {\n\t\t\t\tsetBlockNodes( ( nodes ) => omit( nodes, clientId ) );\n\t\t\t};\n\t\t}\n\t}, [ isSelected, isFirstMultiSelected, isLastMultiSelected ] );\n\n\t// Handling the error state\n\tconst [ hasError, setErrorState ] = useState( false );\n\tconst onBlockError = () => setErrorState( true );\n\n\tconst blockType = getBlockType( name );\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockType.title );\n\n\t// Handing the focus of the block on creation and update\n\n\t/**\n\t * When a block becomes selected, transition focus to an inner tabbable.\n\t *\n\t * @param {boolean} ignoreInnerBlocks Should not focus inner blocks.\n\t */\n\tconst focusTabbable = ( ignoreInnerBlocks ) => {\n\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t// should only consider tabbables within editable display, since it\n\t\t// may be the wrapper itself or a side control which triggered the\n\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\tif ( wrapper.current.contains( document.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( wrapper.current )\n\t\t\t.filter( isTextField )\n\t\t\t// Exclude inner blocks\n\t\t\t.filter(\n\t\t\t\t( node ) =>\n\t\t\t\t\t! ignoreInnerBlocks ||\n\t\t\t\t\tisInsideRootBlock( wrapper.current, node )\n\t\t\t);\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target = ( isReverse ? last : first )( textInputs );\n\n\t\tif ( ! target ) {\n\t\t\twrapper.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t};\n\n\t// Focus the selected block's wrapper or inner input on mount and update\n\tconst isMounting = useRef( true );\n\n\tuseEffect( () => {\n\t\tif ( ! isMultiSelecting && ! isNavigationMode && isSelected ) {\n\t\t\tfocusTabbable( ! isMounting.current );\n\t\t}\n\n\t\tisMounting.current = false;\n\t}, [ isSelected, isMultiSelecting, isNavigationMode ] );\n\n\t// Block Reordering animation\n\tconst animationStyle = useMovingAnimation(\n\t\twrapper,\n\t\tisSelected || isPartOfMultiSelection,\n\t\tisSelected || isFirstMultiSelected,\n\t\tenableAnimation,\n\t\tanimateOnChange\n\t);\n\n\t// Other event handlers\n\n\t/**\n\t * Interprets keydown event intent to remove or insert after block if key\n\t * event occurs on wrapper node. This can occur when the block has no text\n\t * fields of its own, particularly after initial insertion, to allow for\n\t * easy deletion and continuous writing flow to add additional content.\n\t *\n\t * @param {KeyboardEvent} event Keydown event.\n\t */\n\tconst onKeyDown = ( event ) => {\n\t\tconst { keyCode, target } = event;\n\n\t\tswitch ( keyCode ) {\n\t\t\tcase ENTER:\n\t\t\t\tif ( target === wrapper.current ) {\n\t\t\t\t\t// Insert default block after current block if enter and event\n\t\t\t\t\t// not already handled by descendant.\n\t\t\t\t\tonInsertDefaultBlockAfter();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase BACKSPACE:\n\t\t\tcase DELETE:\n\t\t\t\tif ( target === wrapper.current ) {\n\t\t\t\t\t// Remove block on backspace.\n\t\t\t\t\tonRemove( clientId );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst onMouseLeave = ( { which, buttons } ) => {\n\t\t// The primary button must be pressed to initiate selection. Fall back\n\t\t// to `which` if the standard `buttons` property is falsy. There are\n\t\t// cases where Firefox might always set `buttons` to `0`.\n\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\t\tif ( ( buttons || which ) === 1 ) {\n\t\t\tonSelectionStart( clientId );\n\t\t}\n\t};\n\n\tconst isUnregisteredBlock = name === getUnregisteredTypeHandlerName();\n\n\t// If the block is selected and we're typing the block should not appear.\n\t// Empty paragraph blocks should always show up as unselected.\n\tconst showEmptyBlockSideInserter =\n\t\t! isNavigationMode && isSelected && isEmptyDefaultBlock && isValid;\n\tconst shouldAppearSelected =\n\t\t! isFocusMode &&\n\t\t! showEmptyBlockSideInserter &&\n\t\tisSelected &&\n\t\t! isTypingWithinBlock;\n\n\tconst isDragging =\n\t\tisDraggingBlocks && ( isSelected || isPartOfMultiSelection );\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType.getEditWrapperProps ) {\n\t\twrapperProps = {\n\t\t\t...wrapperProps,\n\t\t\t...blockType.getEditWrapperProps( attributes ),\n\t\t};\n\t}\n\n\tconst isAligned = wrapperProps && wrapperProps[ 'data-align' ];\n\n\t// The wp-block className is important for editor styles.\n\t// Generate the wrapper class names handling the different states of the block.\n\tconst wrapperClassName = classnames(\n\t\t'wp-block block-editor-block-list__block',\n\t\t{\n\t\t\t'has-selected-ui': hasSelectedUI,\n\t\t\t'has-warning': ! isValid || !! hasError || isUnregisteredBlock,\n\t\t\t'is-selected': shouldAppearSelected && hasSelectedUI,\n\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t'is-reusable': isReusableBlock( blockType ),\n\t\t\t'is-dragging': isDragging,\n\t\t\t'is-typing': isTypingWithinBlock,\n\t\t\t'is-focused':\n\t\t\t\tisFocusMode && ( isSelected || isAncestorOfSelectedBlock ),\n\t\t\t'is-focus-mode': isFocusMode,\n\t\t\t'has-child-selected': isAncestorOfSelectedBlock,\n\t\t\t'is-block-collapsed': isAligned,\n\t\t},\n\t\tclassName\n\t);\n\n\tconst blockElementId = `block-${ clientId }`;\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ isLocked ? undefined : onReplace }\n\t\t\tmergeBlocks={ isLocked ? undefined : onMerge }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t/>\n\t);\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column. This is enabled with the\n\t// .is-block-content className.\n\tif ( isAligned ) {\n\t\tblockEdit = <div className=\"is-block-content\">{ blockEdit }</div>;\n\t}\n\n\tif ( mode !== 'visual' ) {\n\t\tblockEdit = <div style={ { display: 'none' } }>{ blockEdit }</div>;\n\t}\n\n\treturn (\n\t\t<animated.div\n\t\t\tid={ blockElementId }\n\t\t\tref={ wrapper }\n\t\t\tclassName={ wrapperClassName }\n\t\t\tdata-block={ clientId }\n\t\t\tdata-type={ name }\n\t\t\t// Only allow shortcuts when a blocks is selected and not locked.\n\t\t\tonKeyDown={ isSelected && ! isLocked ? onKeyDown : undefined }\n\t\t\t// Only allow selection to be started from a selected block.\n\t\t\tonMouseLeave={ isSelected ? onMouseLeave : undefined }\n\t\t\ttabIndex=\"0\"\n\t\t\taria-label={ blockLabel }\n\t\t\trole=\"group\"\n\t\t\t{ ...wrapperProps }\n\t\t\tstyle={\n\t\t\t\twrapperProps && wrapperProps.style\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...wrapperProps.style,\n\t\t\t\t\t\t\t...animationStyle,\n\t\t\t\t\t  }\n\t\t\t\t\t: animationStyle\n\t\t\t}\n\t\t>\n\t\t\t<BlockCrashBoundary onError={ onBlockError }>\n\t\t\t\t{ isValid && blockEdit }\n\t\t\t\t{ isValid && mode === 'html' && (\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t) }\n\t\t\t\t{ ! isValid && [\n\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\tkey=\"invalid-warning\"\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>,\n\t\t\t\t\t<div key=\"invalid-preview\">\n\t\t\t\t\t\t{ getSaveElement( blockType, attributes ) }\n\t\t\t\t\t</div>,\n\t\t\t\t] }\n\t\t\t</BlockCrashBoundary>\n\t\t\t{ !! hasError && <BlockCrashWarning /> }\n\t\t</animated.div>\n\t);\n}\n\nconst applyWithSelect = withSelect(\n\t( select, { clientId, rootClientId, isLargeViewport } ) => {\n\t\tconst {\n\t\t\tisBlockSelected,\n\t\t\tisAncestorMultiSelected,\n\t\t\tisBlockMultiSelected,\n\t\t\tisFirstMultiSelectedBlock,\n\t\t\tgetLastMultiSelectedBlockClientId,\n\t\t\tisTyping,\n\t\t\tgetBlockMode,\n\t\t\tisSelectionEnabled,\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tgetSettings,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetTemplateLock,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tisNavigationMode,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst { focusMode, isRTL } = getSettings();\n\t\tconst templateLock = getTemplateLock( rootClientId );\n\t\tconst checkDeep = true;\n\n\t\t// \"ancestor\" is the more appropriate label due to \"deep\" check\n\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tcheckDeep\n\t\t);\n\n\t\t// The fallback to `{}` is a temporary fix.\n\t\t// This function should never be called when a block is not present in the state.\n\t\t// It happens now because the order in withSelect rendering is not correct.\n\t\tconst { name, attributes, isValid } = block || {};\n\n\t\treturn {\n\t\t\tisMultiSelected: isBlockMultiSelected( clientId ),\n\t\t\tisPartOfMultiSelection:\n\t\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\t\tisAncestorMultiSelected( clientId ),\n\t\t\tisFirstMultiSelected: isFirstMultiSelectedBlock( clientId ),\n\t\t\tisLastMultiSelected:\n\t\t\t\tgetLastMultiSelectedBlockClientId() === clientId,\n\n\t\t\t// We only care about this prop when the block is selected\n\t\t\t// Thus to avoid unnecessary rerenders we avoid updating the prop if the block is not selected.\n\t\t\tisTypingWithinBlock:\n\t\t\t\t( isSelected || isAncestorOfSelectedBlock ) && isTyping(),\n\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\tinitialPosition: isSelected\n\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t: null,\n\t\t\tisEmptyDefaultBlock:\n\t\t\t\tname && isUnmodifiedDefaultBlock( { name, attributes } ),\n\t\t\tisLocked: !! templateLock,\n\t\t\tisFocusMode: focusMode && isLargeViewport,\n\t\t\tisNavigationMode: isNavigationMode(),\n\t\t\tisRTL,\n\n\t\t\t// Users of the editor.BlockListBlock filter used to be able to access the block prop\n\t\t\t// Ideally these blocks would rely on the clientId prop only.\n\t\t\t// This is kept for backward compatibility reasons.\n\t\t\tblock,\n\n\t\t\tname,\n\t\t\tattributes,\n\t\t\tisValid,\n\t\t\tisSelected,\n\t\t\tisAncestorOfSelectedBlock,\n\t\t};\n\t}\n);\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, { select } ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tinsertDefaultBlock,\n\t\tremoveBlock,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t} = dispatch( 'core/block-editor' );\n\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tupdateBlockAttributes( clientId, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertDefaultBlockAfter() {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertDefaultBlock( {}, rootClientId, index + 1 );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonRemove( clientId ) {\n\t\t\tremoveBlock( clientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { getPreviousBlockClientId, getNextBlockClientId } = select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\n\t\t\tif ( forward ) {\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId(\n\t\t\t\t\tclientId\n\t\t\t\t);\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\treplaceBlocks( [ ownProps.clientId ], blocks, indexToSelect );\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tpure,\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\t// block is sometimes not mounted at the right time, causing it be undefined\n\t// see issue for more info https://github.com/WordPress/gutenberg/issues/17013\n\tifCondition( ( { block } ) => !! block ),\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n"]}