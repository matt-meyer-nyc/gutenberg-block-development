{"version":3,"sources":["@wordpress/block-directory/src/store/reducer.js"],"names":["combineReducers","downloadableBlocks","state","results","filterValue","undefined","isRequestingDownloadableBlocks","action","type","Object","assign","blockManagement","installedBlockTypes","item","filter","blockType","name","hasPermission"],"mappings":";;;;;;;AAAA;;;AAGA,SAASA,eAAT,QAAgC,iBAAhC;AAEA;;;;;;;;;AAQA,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAO7B;AAAA,MANJC,KAMI,uEANI;AACPC,IAAAA,OAAO,EAAE,EADF;AAEPC,IAAAA,WAAW,EAAEC,SAFN;AAGPC,IAAAA,8BAA8B,EAAE;AAHzB,GAMJ;AAAA,MADJC,MACI;;AACJ,UAASA,MAAM,CAACC,IAAhB;AACC,SAAK,2BAAL;AACC,+BACIN,KADJ;AAECI,QAAAA,8BAA8B,EAAE;AAFjC;;AAID,SAAK,6BAAL;AACC,+BACIJ,KADJ;AAECC,QAAAA,OAAO,EAAEM,MAAM,CAACC,MAAP,CAAe,EAAf,EAAmBR,KAAK,CAACC,OAAzB,sBACNI,MAAM,CAACH,WADD,EACgBG,MAAM,CAACN,kBADvB,EAFV;AAKCK,QAAAA,8BAA8B,EAAE;AALjC;AAPF;;AAeA,SAAOJ,KAAP;AACA,CAxBM;AA0BP;;;;;;;;;AAQA,OAAO,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,GAK1B;AAAA,MAJJT,KAII,uEAJI;AACPU,IAAAA,mBAAmB,EAAE;AADd,GAIJ;AAAA,MADJL,MACI;;AACJ,UAASA,MAAM,CAACC,IAAhB;AACC,SAAK,0BAAL;AACC,+BACIN,KADJ;AAECU,QAAAA,mBAAmB,+BACfV,KAAK,CAACU,mBADS,IAElBL,MAAM,CAACM,IAFW;AAFpB;;AAOD,SAAK,6BAAL;AACC,+BACIX,KADJ;AAECU,QAAAA,mBAAmB,EAAEV,KAAK,CAACU,mBAAN,CAA0BE,MAA1B,CACpB,UAAEC,SAAF;AAAA,iBAAiBA,SAAS,CAACC,IAAV,KAAmBT,MAAM,CAACM,IAAP,CAAYG,IAAhD;AAAA,SADoB;AAFtB;AAVF;;AAiBA,SAAOd,KAAP;AACA,CAxBM;AA0BP;;;;;;;;;AAQA,OAAO,SAASe,aAAT,GAA+C;AAAA,MAAvBf,KAAuB,uEAAf,IAAe;AAAA,MAATK,MAAS;;AACrD,MAAKA,MAAM,CAACC,IAAP,KAAgB,+BAArB,EAAuD;AACtD,WAAOD,MAAM,CAACU,aAAd;AACA;;AAED,SAAOf,KAAP;AACA;AAED,eAAeF,eAAe,CAAE;AAC/BC,EAAAA,kBAAkB,EAAlBA,kBAD+B;AAE/BU,EAAAA,eAAe,EAAfA,eAF+B;AAG/BM,EAAAA,aAAa,EAAbA;AAH+B,CAAF,CAA9B","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Reducer returning an array of downloadable blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const downloadableBlocks = (\n\tstate = {\n\t\tresults: {},\n\t\tfilterValue: undefined,\n\t\tisRequestingDownloadableBlocks: true,\n\t},\n\taction\n) => {\n\tswitch ( action.type ) {\n\t\tcase 'FETCH_DOWNLOADABLE_BLOCKS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisRequestingDownloadableBlocks: true,\n\t\t\t};\n\t\tcase 'RECEIVE_DOWNLOADABLE_BLOCKS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: Object.assign( {}, state.results, {\n\t\t\t\t\t[ action.filterValue ]: action.downloadableBlocks,\n\t\t\t\t} ),\n\t\t\t\tisRequestingDownloadableBlocks: false,\n\t\t\t};\n\t}\n\treturn state;\n};\n\n/**\n * Reducer managing the installation and deletion of blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blockManagement = (\n\tstate = {\n\t\tinstalledBlockTypes: [],\n\t},\n\taction\n) => {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_INSTALLED_BLOCK_TYPE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinstalledBlockTypes: [\n\t\t\t\t\t...state.installedBlockTypes,\n\t\t\t\t\taction.item,\n\t\t\t\t],\n\t\t\t};\n\t\tcase 'REMOVE_INSTALLED_BLOCK_TYPE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinstalledBlockTypes: state.installedBlockTypes.filter(\n\t\t\t\t\t( blockType ) => blockType.name !== action.item.name\n\t\t\t\t),\n\t\t\t};\n\t}\n\treturn state;\n};\n\n/**\n * Reducer returns whether the user can install blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function hasPermission( state = true, action ) {\n\tif ( action.type === 'SET_INSTALL_BLOCKS_PERMISSION' ) {\n\t\treturn action.hasPermission;\n\t}\n\n\treturn state;\n}\n\nexport default combineReducers( {\n\tdownloadableBlocks,\n\tblockManagement,\n\thasPermission,\n} );\n"]}