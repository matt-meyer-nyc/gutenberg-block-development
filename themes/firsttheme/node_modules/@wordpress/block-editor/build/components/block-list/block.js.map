{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.js"],"names":["BlockListBlock","mode","isFocusMode","isLocked","clientId","isSelected","isMultiSelected","isPartOfMultiSelection","isFirstMultiSelected","isLastMultiSelected","isTypingWithinBlock","isEmptyDefaultBlock","isAncestorOfSelectedBlock","isSelectionEnabled","className","name","isValid","attributes","initialPosition","wrapperProps","setAttributes","onReplace","onInsertBlocksAfter","onMerge","onRemove","onInsertDefaultBlockAfter","toggleSelection","animateOnChange","enableAnimation","isNavigationMode","isMultiSelecting","hasSelectedUI","onSelectionStart","Context","BlockNodes","setBlockNodes","select","isDraggingBlocks","wrapper","node","current","nodes","hasError","setErrorState","onBlockError","blockType","blockLabel","title","focusTabbable","ignoreInnerBlocks","contains","document","activeElement","textInputs","focus","tabbable","find","filter","isTextField","isReverse","target","last","first","isMounting","animationStyle","onKeyDown","event","keyCode","ENTER","preventDefault","BACKSPACE","DELETE","onMouseLeave","which","buttons","isUnregisteredBlock","showEmptyBlockSideInserter","shouldAppearSelected","isDragging","getEditWrapperProps","isAligned","wrapperClassName","blockElementId","blockEdit","undefined","display","style","applyWithSelect","rootClientId","isLargeViewport","isBlockSelected","isAncestorMultiSelected","isBlockMultiSelected","isFirstMultiSelectedBlock","getLastMultiSelectedBlockClientId","isTyping","getBlockMode","getSelectedBlocksInitialCaretPosition","getSettings","hasSelectedInnerBlock","getTemplateLock","__unstableGetBlockWithoutInnerBlocks","block","focusMode","isRTL","templateLock","checkDeep","applyWithDispatch","dispatch","ownProps","updateBlockAttributes","insertBlocks","insertDefaultBlock","removeBlock","mergeBlocks","replaceBlocks","__unstableMarkLastChangeAsPersistent","newAttributes","onInsertBlocks","blocks","index","getBlockIndex","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","indexToSelect","length","selectionEnabled","pure"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { first, last, omit } from 'lodash';\nimport { animated } from 'react-spring/web.cjs';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseState,\n\tuseContext,\n} from '@wordpress/element';\nimport { focus, isTextField, placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { BACKSPACE, DELETE, ENTER } from '@wordpress/keycodes';\nimport {\n\tgetBlockType,\n\tgetSaveElement,\n\tisReusableBlock,\n\tisUnmodifiedDefaultBlock,\n\tgetUnregisteredTypeHandlerName,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { withDispatch, withSelect, useSelect } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { compose, pure, ifCondition } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { isInsideRootBlock } from '../../utils/dom';\nimport useMovingAnimation from './moving-animation';\nimport { Context, BlockNodes } from './root-container';\n\nfunction BlockListBlock( {\n\tmode,\n\tisFocusMode,\n\tisLocked,\n\tclientId,\n\tisSelected,\n\tisMultiSelected,\n\tisPartOfMultiSelection,\n\tisFirstMultiSelected,\n\tisLastMultiSelected,\n\tisTypingWithinBlock,\n\tisEmptyDefaultBlock,\n\tisAncestorOfSelectedBlock,\n\tisSelectionEnabled,\n\tclassName,\n\tname,\n\tisValid,\n\tattributes,\n\tinitialPosition,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\tonRemove,\n\tonInsertDefaultBlockAfter,\n\ttoggleSelection,\n\tanimateOnChange,\n\tenableAnimation,\n\tisNavigationMode,\n\tisMultiSelecting,\n\thasSelectedUI = true,\n} ) {\n\tconst onSelectionStart = useContext( Context );\n\tconst [ , setBlockNodes ] = useContext( BlockNodes );\n\t// In addition to withSelect, we should favor using useSelect in this component going forward\n\t// to avoid leaking new props to the public API (editor.BlockListBlock filter)\n\tconst { isDraggingBlocks } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tisDraggingBlocks: select( 'core/block-editor' ).isDraggingBlocks(),\n\t\t};\n\t}, [] );\n\n\t// Reference of the wrapper\n\tconst wrapper = useRef( null );\n\n\t// Provide the selected node, or the first and last nodes of a multi-\n\t// selection, so it can be used to position the contextual block toolbar.\n\t// We only provide what is necessary, and remove the nodes again when they\n\t// are no longer selected.\n\tuseLayoutEffect( () => {\n\t\tif ( isSelected || isFirstMultiSelected || isLastMultiSelected ) {\n\t\t\tconst node = wrapper.current;\n\t\t\tsetBlockNodes( ( nodes ) => ( { ...nodes, [ clientId ]: node } ) );\n\t\t\treturn () => {\n\t\t\t\tsetBlockNodes( ( nodes ) => omit( nodes, clientId ) );\n\t\t\t};\n\t\t}\n\t}, [ isSelected, isFirstMultiSelected, isLastMultiSelected ] );\n\n\t// Handling the error state\n\tconst [ hasError, setErrorState ] = useState( false );\n\tconst onBlockError = () => setErrorState( true );\n\n\tconst blockType = getBlockType( name );\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockType.title );\n\n\t// Handing the focus of the block on creation and update\n\n\t/**\n\t * When a block becomes selected, transition focus to an inner tabbable.\n\t *\n\t * @param {boolean} ignoreInnerBlocks Should not focus inner blocks.\n\t */\n\tconst focusTabbable = ( ignoreInnerBlocks ) => {\n\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t// should only consider tabbables within editable display, since it\n\t\t// may be the wrapper itself or a side control which triggered the\n\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\tif ( wrapper.current.contains( document.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( wrapper.current )\n\t\t\t.filter( isTextField )\n\t\t\t// Exclude inner blocks\n\t\t\t.filter(\n\t\t\t\t( node ) =>\n\t\t\t\t\t! ignoreInnerBlocks ||\n\t\t\t\t\tisInsideRootBlock( wrapper.current, node )\n\t\t\t);\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target = ( isReverse ? last : first )( textInputs );\n\n\t\tif ( ! target ) {\n\t\t\twrapper.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t};\n\n\t// Focus the selected block's wrapper or inner input on mount and update\n\tconst isMounting = useRef( true );\n\n\tuseEffect( () => {\n\t\tif ( ! isMultiSelecting && ! isNavigationMode && isSelected ) {\n\t\t\tfocusTabbable( ! isMounting.current );\n\t\t}\n\n\t\tisMounting.current = false;\n\t}, [ isSelected, isMultiSelecting, isNavigationMode ] );\n\n\t// Block Reordering animation\n\tconst animationStyle = useMovingAnimation(\n\t\twrapper,\n\t\tisSelected || isPartOfMultiSelection,\n\t\tisSelected || isFirstMultiSelected,\n\t\tenableAnimation,\n\t\tanimateOnChange\n\t);\n\n\t// Other event handlers\n\n\t/**\n\t * Interprets keydown event intent to remove or insert after block if key\n\t * event occurs on wrapper node. This can occur when the block has no text\n\t * fields of its own, particularly after initial insertion, to allow for\n\t * easy deletion and continuous writing flow to add additional content.\n\t *\n\t * @param {KeyboardEvent} event Keydown event.\n\t */\n\tconst onKeyDown = ( event ) => {\n\t\tconst { keyCode, target } = event;\n\n\t\tswitch ( keyCode ) {\n\t\t\tcase ENTER:\n\t\t\t\tif ( target === wrapper.current ) {\n\t\t\t\t\t// Insert default block after current block if enter and event\n\t\t\t\t\t// not already handled by descendant.\n\t\t\t\t\tonInsertDefaultBlockAfter();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase BACKSPACE:\n\t\t\tcase DELETE:\n\t\t\t\tif ( target === wrapper.current ) {\n\t\t\t\t\t// Remove block on backspace.\n\t\t\t\t\tonRemove( clientId );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst onMouseLeave = ( { which, buttons } ) => {\n\t\t// The primary button must be pressed to initiate selection. Fall back\n\t\t// to `which` if the standard `buttons` property is falsy. There are\n\t\t// cases where Firefox might always set `buttons` to `0`.\n\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\t\tif ( ( buttons || which ) === 1 ) {\n\t\t\tonSelectionStart( clientId );\n\t\t}\n\t};\n\n\tconst isUnregisteredBlock = name === getUnregisteredTypeHandlerName();\n\n\t// If the block is selected and we're typing the block should not appear.\n\t// Empty paragraph blocks should always show up as unselected.\n\tconst showEmptyBlockSideInserter =\n\t\t! isNavigationMode && isSelected && isEmptyDefaultBlock && isValid;\n\tconst shouldAppearSelected =\n\t\t! isFocusMode &&\n\t\t! showEmptyBlockSideInserter &&\n\t\tisSelected &&\n\t\t! isTypingWithinBlock;\n\n\tconst isDragging =\n\t\tisDraggingBlocks && ( isSelected || isPartOfMultiSelection );\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType.getEditWrapperProps ) {\n\t\twrapperProps = {\n\t\t\t...wrapperProps,\n\t\t\t...blockType.getEditWrapperProps( attributes ),\n\t\t};\n\t}\n\n\tconst isAligned = wrapperProps && wrapperProps[ 'data-align' ];\n\n\t// The wp-block className is important for editor styles.\n\t// Generate the wrapper class names handling the different states of the block.\n\tconst wrapperClassName = classnames(\n\t\t'wp-block block-editor-block-list__block',\n\t\t{\n\t\t\t'has-selected-ui': hasSelectedUI,\n\t\t\t'has-warning': ! isValid || !! hasError || isUnregisteredBlock,\n\t\t\t'is-selected': shouldAppearSelected && hasSelectedUI,\n\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t'is-reusable': isReusableBlock( blockType ),\n\t\t\t'is-dragging': isDragging,\n\t\t\t'is-typing': isTypingWithinBlock,\n\t\t\t'is-focused':\n\t\t\t\tisFocusMode && ( isSelected || isAncestorOfSelectedBlock ),\n\t\t\t'is-focus-mode': isFocusMode,\n\t\t\t'has-child-selected': isAncestorOfSelectedBlock,\n\t\t\t'is-block-collapsed': isAligned,\n\t\t},\n\t\tclassName\n\t);\n\n\tconst blockElementId = `block-${ clientId }`;\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ isLocked ? undefined : onReplace }\n\t\t\tmergeBlocks={ isLocked ? undefined : onMerge }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t/>\n\t);\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column. This is enabled with the\n\t// .is-block-content className.\n\tif ( isAligned ) {\n\t\tblockEdit = <div className=\"is-block-content\">{ blockEdit }</div>;\n\t}\n\n\tif ( mode !== 'visual' ) {\n\t\tblockEdit = <div style={ { display: 'none' } }>{ blockEdit }</div>;\n\t}\n\n\treturn (\n\t\t<animated.div\n\t\t\tid={ blockElementId }\n\t\t\tref={ wrapper }\n\t\t\tclassName={ wrapperClassName }\n\t\t\tdata-block={ clientId }\n\t\t\tdata-type={ name }\n\t\t\t// Only allow shortcuts when a blocks is selected and not locked.\n\t\t\tonKeyDown={ isSelected && ! isLocked ? onKeyDown : undefined }\n\t\t\t// Only allow selection to be started from a selected block.\n\t\t\tonMouseLeave={ isSelected ? onMouseLeave : undefined }\n\t\t\ttabIndex=\"0\"\n\t\t\taria-label={ blockLabel }\n\t\t\trole=\"group\"\n\t\t\t{ ...wrapperProps }\n\t\t\tstyle={\n\t\t\t\twrapperProps && wrapperProps.style\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...wrapperProps.style,\n\t\t\t\t\t\t\t...animationStyle,\n\t\t\t\t\t  }\n\t\t\t\t\t: animationStyle\n\t\t\t}\n\t\t>\n\t\t\t<BlockCrashBoundary onError={ onBlockError }>\n\t\t\t\t{ isValid && blockEdit }\n\t\t\t\t{ isValid && mode === 'html' && (\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t) }\n\t\t\t\t{ ! isValid && [\n\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\tkey=\"invalid-warning\"\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>,\n\t\t\t\t\t<div key=\"invalid-preview\">\n\t\t\t\t\t\t{ getSaveElement( blockType, attributes ) }\n\t\t\t\t\t</div>,\n\t\t\t\t] }\n\t\t\t</BlockCrashBoundary>\n\t\t\t{ !! hasError && <BlockCrashWarning /> }\n\t\t</animated.div>\n\t);\n}\n\nconst applyWithSelect = withSelect(\n\t( select, { clientId, rootClientId, isLargeViewport } ) => {\n\t\tconst {\n\t\t\tisBlockSelected,\n\t\t\tisAncestorMultiSelected,\n\t\t\tisBlockMultiSelected,\n\t\t\tisFirstMultiSelectedBlock,\n\t\t\tgetLastMultiSelectedBlockClientId,\n\t\t\tisTyping,\n\t\t\tgetBlockMode,\n\t\t\tisSelectionEnabled,\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tgetSettings,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetTemplateLock,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tisNavigationMode,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst { focusMode, isRTL } = getSettings();\n\t\tconst templateLock = getTemplateLock( rootClientId );\n\t\tconst checkDeep = true;\n\n\t\t// \"ancestor\" is the more appropriate label due to \"deep\" check\n\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tcheckDeep\n\t\t);\n\n\t\t// The fallback to `{}` is a temporary fix.\n\t\t// This function should never be called when a block is not present in the state.\n\t\t// It happens now because the order in withSelect rendering is not correct.\n\t\tconst { name, attributes, isValid } = block || {};\n\n\t\treturn {\n\t\t\tisMultiSelected: isBlockMultiSelected( clientId ),\n\t\t\tisPartOfMultiSelection:\n\t\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\t\tisAncestorMultiSelected( clientId ),\n\t\t\tisFirstMultiSelected: isFirstMultiSelectedBlock( clientId ),\n\t\t\tisLastMultiSelected:\n\t\t\t\tgetLastMultiSelectedBlockClientId() === clientId,\n\n\t\t\t// We only care about this prop when the block is selected\n\t\t\t// Thus to avoid unnecessary rerenders we avoid updating the prop if the block is not selected.\n\t\t\tisTypingWithinBlock:\n\t\t\t\t( isSelected || isAncestorOfSelectedBlock ) && isTyping(),\n\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\tinitialPosition: isSelected\n\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t: null,\n\t\t\tisEmptyDefaultBlock:\n\t\t\t\tname && isUnmodifiedDefaultBlock( { name, attributes } ),\n\t\t\tisLocked: !! templateLock,\n\t\t\tisFocusMode: focusMode && isLargeViewport,\n\t\t\tisNavigationMode: isNavigationMode(),\n\t\t\tisRTL,\n\n\t\t\t// Users of the editor.BlockListBlock filter used to be able to access the block prop\n\t\t\t// Ideally these blocks would rely on the clientId prop only.\n\t\t\t// This is kept for backward compatibility reasons.\n\t\t\tblock,\n\n\t\t\tname,\n\t\t\tattributes,\n\t\t\tisValid,\n\t\t\tisSelected,\n\t\t\tisAncestorOfSelectedBlock,\n\t\t};\n\t}\n);\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, { select } ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tinsertDefaultBlock,\n\t\tremoveBlock,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t} = dispatch( 'core/block-editor' );\n\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tupdateBlockAttributes( clientId, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertDefaultBlockAfter() {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertDefaultBlock( {}, rootClientId, index + 1 );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonRemove( clientId ) {\n\t\t\tremoveBlock( clientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { getPreviousBlockClientId, getNextBlockClientId } = select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\n\t\t\tif ( forward ) {\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId(\n\t\t\t\t\tclientId\n\t\t\t\t);\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\treplaceBlocks( [ ownProps.clientId ], blocks, indexToSelect );\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tpure,\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\t// block is sometimes not mounted at the right time, causing it be undefined\n\t// see issue for more info https://github.com/WordPress/gutenberg/issues/17013\n\tifCondition( ( { block } ) => !! block ),\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n"]}