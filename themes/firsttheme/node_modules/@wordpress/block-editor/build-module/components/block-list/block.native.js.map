{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.native.js"],"names":["View","Text","TouchableWithoutFeedback","Component","ToolbarButton","Toolbar","withDispatch","withSelect","compose","withPreferredColorScheme","getBlockType","getUnregisteredTypeHandlerName","__experimentalGetAccessibleBlockLabel","getAccessibleBlockLabel","__","styles","BlockEdit","BlockInvalidWarning","BlockMobileToolbar","FloatingToolbar","Breadcrumbs","NavigateUpSVG","BlockListBlock","arguments","insertBlocksAfter","bind","onFocus","props","firstToSelectId","isSelected","onSelect","blocks","onInsertBlocks","order","clientId","name","attributes","onChange","onReplace","mergeBlocks","onCaretVerticalPositionChange","blockTitle","hasChildren","getStylesFromColorScheme","isSmallScreen","isRootListInnerBlockHolder","fullSolidBorderStyle","fullSolidBordered","solidBorderColor","solidBorderColorDark","selectedParent","selectedRootLeaf","semiSolidBordered","borderColor","selectedLeaf","isParentSelected","isAncestorSelected","hasParent","isLastBlock","neutral","full","dashedBorderStyle","dashedBordered","dashedBorderColor","dashedBorderColorDark","childOfSelected","childOfSelectedLeaf","marginVerticalChild","descendantOfSelectedLeaf","marginHorizontalNone","marginVerticalNone","marginVerticalDescendant","isDimmed","applySelectedBlockStyle","applyUnSelectedBlockStyle","dimmed","isUnregisteredBlock","neutralToolbar","blockType","icon","isValid","title","showFloatingToolbar","parentId","isTouchable","accessibilityLabel","toolbar","pipe","applyBlockStyle","getBlockForType","applyToolbarStyle","select","rootClientId","getBlockIndex","isBlockSelected","__unstableGetBlockWithoutInnerBlocks","getBlockHierarchyRootClientId","getSelectedBlockClientId","getBlock","getBlockRootClientId","getLowestCommonAncestorWithSelectedBlock","getBlockParents","getBlockCount","getGroupingBlockName","block","parents","rootBlockId","rootBlock","hasRootInnerBlocks","innerBlocks","length","selectedBlockClientId","commonAncestor","commonAncestorIndex","indexOf","includes","isSelectedBlockNested","selectedParents","isDescendantSelected","isDescendantOfParentSelected","isInnerBlockHolder","dispatch","ownProps","insertBlocks","replaceBlocks","selectBlock","updateBlockAttributes","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","index","initialPosition","indexToSelect"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { ToolbarButton, Toolbar } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\tgetUnregisteredTypeHandlerName,\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './block.scss';\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockMobileToolbar from '../block-mobile-toolbar';\nimport FloatingToolbar from './block-mobile-floating-toolbar';\nimport Breadcrumbs from './breadcrumb';\nimport NavigateUpSVG from './nav-up-icon';\n\nclass BlockListBlock extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.insertBlocksAfter = this.insertBlocksAfter.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t}\n\n\tonFocus() {\n\t\tconst { firstToSelectId, isSelected, onSelect } = this.props;\n\t\tif ( ! isSelected ) {\n\t\t\tonSelect( firstToSelectId );\n\t\t}\n\t}\n\n\tinsertBlocksAfter( blocks ) {\n\t\tthis.props.onInsertBlocks( blocks, this.props.order + 1 );\n\n\t\tif ( blocks[ 0 ] ) {\n\t\t\t// focus on the first block inserted\n\t\t\tthis.props.onSelect( blocks[ 0 ].clientId );\n\t\t}\n\t}\n\n\tgetBlockForType() {\n\t\treturn (\n\t\t\t<BlockEdit\n\t\t\t\tname={ this.props.name }\n\t\t\t\tisSelected={ this.props.isSelected }\n\t\t\t\tattributes={ this.props.attributes }\n\t\t\t\tsetAttributes={ this.props.onChange }\n\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\tonReplace={ this.props.onReplace }\n\t\t\t\tinsertBlocksAfter={ this.insertBlocksAfter }\n\t\t\t\tmergeBlocks={ this.props.mergeBlocks }\n\t\t\t\tonCaretVerticalPositionChange={\n\t\t\t\t\tthis.props.onCaretVerticalPositionChange\n\t\t\t\t}\n\t\t\t\tclientId={ this.props.clientId }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderBlockTitle() {\n\t\treturn (\n\t\t\t<View style={ styles.blockTitle }>\n\t\t\t\t<Text>BlockType: { this.props.name }</Text>\n\t\t\t</View>\n\t\t);\n\t}\n\n\tapplySelectedBlockStyle() {\n\t\tconst {\n\t\t\thasChildren,\n\t\t\tgetStylesFromColorScheme,\n\t\t\tisSmallScreen,\n\t\t\tisRootListInnerBlockHolder,\n\t\t} = this.props;\n\n\t\tconst fullSolidBorderStyle = {\n\t\t\t// define style for full border\n\t\t\t...styles.fullSolidBordered,\n\t\t\t...getStylesFromColorScheme(\n\t\t\t\tstyles.solidBorderColor,\n\t\t\t\tstyles.solidBorderColorDark\n\t\t\t),\n\t\t};\n\n\t\tif ( hasChildren ) {\n\t\t\t// if block has children apply style for selected parent\n\t\t\treturn { ...styles.selectedParent, ...fullSolidBorderStyle };\n\t\t}\n\n\t\t// apply semi border selected style when screen is in vertical position\n\t\t// and selected block does not have InnerBlock inside\n\t\tif ( isSmallScreen && ! isRootListInnerBlockHolder ) {\n\t\t\treturn {\n\t\t\t\t...styles.selectedRootLeaf,\n\t\t\t\t...styles.semiSolidBordered,\n\t\t\t\t...{ borderColor: fullSolidBorderStyle.borderColor },\n\t\t\t};\n\t\t}\n\n\t\t/* selected block is one of below:\n\t\t\t\t1. does not have children\n\t\t\t\t2. is not on root list level\n\t\t\t\t3. is an emty group block on root or nested level\t*/\n\t\treturn { ...styles.selectedLeaf, ...fullSolidBorderStyle };\n\t}\n\n\tapplyUnSelectedBlockStyle() {\n\t\tconst {\n\t\t\thasChildren,\n\t\t\tisParentSelected,\n\t\t\tisAncestorSelected,\n\t\t\thasParent,\n\t\t\tgetStylesFromColorScheme,\n\t\t\tisLastBlock,\n\t\t} = this.props;\n\n\t\t// if block does not have parent apply neutral or full\n\t\t// margins depending if block has children or not\n\t\tif ( ! hasParent ) {\n\t\t\treturn hasChildren ? styles.neutral : styles.full;\n\t\t}\n\n\t\tif ( isParentSelected ) {\n\t\t\t// parent of a block is selected\n\t\t\tconst dashedBorderStyle = {\n\t\t\t\t// define style for dashed border\n\t\t\t\t...styles.dashedBordered,\n\t\t\t\t...getStylesFromColorScheme(\n\t\t\t\t\tstyles.dashedBorderColor,\n\t\t\t\t\tstyles.dashedBorderColorDark\n\t\t\t\t),\n\t\t\t};\n\n\t\t\t// return apply childOfSelected or childOfSelectedLeaf\n\t\t\t// margins depending if block has children or not\n\t\t\treturn {\n\t\t\t\t...( hasChildren\n\t\t\t\t\t? styles.childOfSelected\n\t\t\t\t\t: styles.childOfSelectedLeaf ),\n\t\t\t\t...dashedBorderStyle,\n\t\t\t\t...( ! isLastBlock && styles.marginVerticalChild ),\n\t\t\t};\n\t\t}\n\n\t\tif ( isAncestorSelected ) {\n\t\t\t// ancestor of a block is selected\n\t\t\treturn {\n\t\t\t\t...styles.descendantOfSelectedLeaf,\n\t\t\t\t...( hasChildren && {\n\t\t\t\t\t...styles.marginHorizontalNone,\n\t\t\t\t\t...styles.marginVerticalNone,\n\t\t\t\t} ),\n\t\t\t\t...( ! isLastBlock && styles.marginVerticalDescendant ),\n\t\t\t};\n\t\t}\n\n\t\t// if none of above condition are met return apply neutral or full\n\t\t// margins depending if block has children or not\n\t\treturn hasChildren ? styles.neutral : styles.full;\n\t}\n\n\tapplyBlockStyle() {\n\t\tconst { isSelected, isDimmed } = this.props;\n\n\t\treturn [\n\t\t\tisSelected\n\t\t\t\t? this.applySelectedBlockStyle()\n\t\t\t\t: this.applyUnSelectedBlockStyle(),\n\t\t\tisDimmed && styles.dimmed,\n\t\t];\n\t}\n\n\tapplyToolbarStyle() {\n\t\tconst { hasChildren, isUnregisteredBlock } = this.props;\n\n\t\tif ( ! hasChildren || isUnregisteredBlock ) {\n\t\t\treturn styles.neutralToolbar;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tblockType,\n\t\t\tclientId,\n\t\t\ticon,\n\t\t\tisSelected,\n\t\t\tisValid,\n\t\t\torder,\n\t\t\ttitle,\n\t\t\tshowFloatingToolbar,\n\t\t\tparentId,\n\t\t\tisTouchable,\n\t\t} = this.props;\n\n\t\tconst accessibilityLabel = getAccessibleBlockLabel(\n\t\t\tblockType,\n\t\t\tattributes,\n\t\t\torder + 1\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ showFloatingToolbar && (\n\t\t\t\t\t<FloatingToolbar>\n\t\t\t\t\t\t<Toolbar passedStyle={ styles.toolbar }>\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\ttitle={ __( 'Navigate Up' ) }\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.props.onSelect( parentId )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ticon={ NavigateUpSVG }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<View style={ styles.pipe } />\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t<Breadcrumbs clientId={ clientId } />\n\t\t\t\t\t</FloatingToolbar>\n\t\t\t\t) }\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ this.onFocus }\n\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tpointerEvents={ isTouchable ? 'auto' : 'box-only' }\n\t\t\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\t\t\tstyle={ this.applyBlockStyle() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isValid ? (\n\t\t\t\t\t\t\tthis.getBlockForType()\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\t\t\tblockTitle={ title }\n\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<View style={ this.applyToolbarStyle() }>\n\t\t\t\t\t\t\t{ isSelected && (\n\t\t\t\t\t\t\t\t<BlockMobileToolbar clientId={ clientId } />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId, rootClientId } ) => {\n\t\tconst {\n\t\t\tgetBlockIndex,\n\t\t\tisBlockSelected,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlock,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetLowestCommonAncestorWithSelectedBlock,\n\t\t\tgetBlockParents,\n\t\t\tgetBlockCount,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst { getGroupingBlockName } = select( 'core/blocks' );\n\n\t\tconst order = getBlockIndex( clientId, rootClientId );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst isLastBlock = order === getBlockCount( rootClientId ) - 1;\n\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\tconst { name, attributes, isValid } = block || {};\n\n\t\tconst isUnregisteredBlock = name === getUnregisteredTypeHandlerName();\n\t\tconst blockType = getBlockType( name || 'core/missing' );\n\t\tconst title = blockType.title;\n\t\tconst icon = blockType.icon;\n\n\t\tconst parents = getBlockParents( clientId, true );\n\t\tconst parentId = parents[ 0 ] || '';\n\n\t\tconst rootBlockId = getBlockHierarchyRootClientId( clientId );\n\t\tconst rootBlock = getBlock( rootBlockId );\n\t\tconst hasRootInnerBlocks = rootBlock.innerBlocks.length !== 0;\n\n\t\tconst showFloatingToolbar = isSelected && hasRootInnerBlocks;\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\tconst commonAncestor = getLowestCommonAncestorWithSelectedBlock(\n\t\t\tclientId\n\t\t);\n\t\tconst commonAncestorIndex = parents.indexOf( commonAncestor ) - 1;\n\t\tconst firstToSelectId = commonAncestor\n\t\t\t? parents[ commonAncestorIndex ]\n\t\t\t: parents[ parents.length - 1 ];\n\n\t\tconst hasChildren =\n\t\t\t! isUnregisteredBlock && !! getBlockCount( clientId );\n\t\tconst hasParent = !! parentId;\n\t\tconst isParentSelected =\n\t\t\tselectedBlockClientId && selectedBlockClientId === parentId;\n\t\tconst isAncestorSelected =\n\t\t\tselectedBlockClientId && parents.includes( selectedBlockClientId );\n\t\tconst isSelectedBlockNested = !! getBlockRootClientId(\n\t\t\tselectedBlockClientId\n\t\t);\n\n\t\tconst selectedParents = selectedBlockClientId\n\t\t\t? getBlockParents( selectedBlockClientId )\n\t\t\t: [];\n\t\tconst isDescendantSelected = selectedParents.includes( clientId );\n\t\tconst isDescendantOfParentSelected = selectedParents.includes(\n\t\t\tparentId\n\t\t);\n\t\tconst isTouchable =\n\t\t\tisSelected ||\n\t\t\tisDescendantOfParentSelected ||\n\t\t\tisParentSelected ||\n\t\t\tparentId === '';\n\t\tconst isDimmed =\n\t\t\t! isSelected &&\n\t\t\tisSelectedBlockNested &&\n\t\t\t! isAncestorSelected &&\n\t\t\t! isDescendantSelected &&\n\t\t\t( isDescendantOfParentSelected || rootBlockId === clientId );\n\n\t\tconst isInnerBlockHolder = name === getGroupingBlockName();\n\t\tconst isRootListInnerBlockHolder =\n\t\t\t! isSelectedBlockNested && isInnerBlockHolder;\n\n\t\treturn {\n\t\t\ticon,\n\t\t\tname: name || 'core/missing',\n\t\t\torder,\n\t\t\ttitle,\n\t\t\tattributes,\n\t\t\tblockType,\n\t\t\tisLastBlock,\n\t\t\tisSelected,\n\t\t\tisValid,\n\t\t\tshowFloatingToolbar,\n\t\t\tparentId,\n\t\t\tisParentSelected,\n\t\t\tfirstToSelectId,\n\t\t\thasChildren,\n\t\t\thasParent,\n\t\t\tisAncestorSelected,\n\t\t\tisTouchable,\n\t\t\tisDimmed,\n\t\t\tisRootListInnerBlockHolder,\n\t\t\tisUnregisteredBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\tconst {\n\t\t\tinsertBlocks,\n\t\t\tmergeBlocks,\n\t\t\treplaceBlocks,\n\t\t\tselectBlock,\n\t\t\tupdateBlockAttributes,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tmergeBlocks( forward ) {\n\t\t\t\tconst { clientId } = ownProps;\n\t\t\t\tconst {\n\t\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\t\tgetNextBlockClientId,\n\t\t\t\t} = select( 'core/block-editor' );\n\n\t\t\t\tif ( forward ) {\n\t\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId(\n\t\t\t\t\t\tclientId\n\t\t\t\t\t);\n\t\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertBlocks( blocks, index ) {\n\t\t\t\tinsertBlocks( blocks, index, ownProps.rootClientId );\n\t\t\t},\n\t\t\tonSelect( clientId = ownProps.clientId, initialPosition ) {\n\t\t\t\tselectBlock( clientId, initialPosition );\n\t\t\t},\n\t\t\tonChange: ( attributes ) => {\n\t\t\t\tupdateBlockAttributes( ownProps.clientId, attributes );\n\t\t\t},\n\t\t\tonReplace( blocks, indexToSelect ) {\n\t\t\t\treplaceBlocks( [ ownProps.clientId ], blocks, indexToSelect );\n\t\t\t},\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( BlockListBlock );\n"]}