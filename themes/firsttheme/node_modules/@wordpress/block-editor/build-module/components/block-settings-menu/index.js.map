{"version":3,"sources":["@wordpress/block-editor/src/components/block-settings-menu/index.js"],"names":["castArray","flow","__","_n","Toolbar","DropdownMenu","MenuGroup","MenuItem","useSelect","trash","moreHorizontal","BlockActions","BlockModeToggle","BlockHTMLConvertButton","BlockUnknownConvertButton","__experimentalBlockSettingsMenuFirstItem","__experimentalBlockSettingsMenuPluginsExtension","POPOVER_PROPS","className","position","BlockSettingsMenu","clientIds","blockClientIds","count","length","firstBlockClientId","shortcuts","select","getShortcutRepresentation","duplicate","remove","insertAfter","insertBefore","canDuplicate","canInsertDefaultBlock","isLocked","onDuplicate","onInsertAfter","onInsertBefore","onRemove","onClose"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { castArray, flow } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n } from '@wordpress/i18n';\nimport {\n\tToolbar,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { trash, moreHorizontal } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\nimport BlockModeToggle from './block-mode-toggle';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport BlockUnknownConvertButton from './block-unknown-convert-button';\nimport __experimentalBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport __experimentalBlockSettingsMenuPluginsExtension from './block-settings-menu-plugins-extension';\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-editor-block-settings-menu__popover',\n\tposition: 'bottom right',\n};\n\nexport function BlockSettingsMenu( { clientIds } ) {\n\tconst blockClientIds = castArray( clientIds );\n\tconst count = blockClientIds.length;\n\tconst firstBlockClientId = blockClientIds[ 0 ];\n\n\tconst shortcuts = useSelect( ( select ) => {\n\t\tconst { getShortcutRepresentation } = select(\n\t\t\t'core/keyboard-shortcuts'\n\t\t);\n\t\treturn {\n\t\t\tduplicate: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/duplicate'\n\t\t\t),\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\n\t\t\tinsertAfter: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-after'\n\t\t\t),\n\t\t\tinsertBefore: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-before'\n\t\t\t),\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<BlockActions clientIds={ clientIds }>\n\t\t\t{ ( {\n\t\t\t\tcanDuplicate,\n\t\t\t\tcanInsertDefaultBlock,\n\t\t\t\tisLocked,\n\t\t\t\tonDuplicate,\n\t\t\t\tonInsertAfter,\n\t\t\t\tonInsertBefore,\n\t\t\t\tonRemove,\n\t\t\t} ) => (\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\ticon={ moreHorizontal }\n\t\t\t\t\t\tlabel={ __( 'More options' ) }\n\t\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\n\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t<__experimentalBlockSettingsMenuFirstItem.Slot\n\t\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t<BlockUnknownConvertButton\n\t\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ canDuplicate && (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonDuplicate\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\ticon=\"admin-page\"\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ canInsertDefaultBlock && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"insert-before\"\n\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Insert Before' ) }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"insert-after\"\n\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Insert After' ) }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<__experimentalBlockSettingsMenuPluginsExtension.Slot\n\t\t\t\t\t\t\t\t\t\tfillProps={ { clientIds, onClose } }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ flow(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonRemove\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\ticon={ trash }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.remove }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ _n(\n\t\t\t\t\t\t\t\t\t\t\t\t'Remove Block',\n\t\t\t\t\t\t\t\t\t\t\t\t'Remove Blocks',\n\t\t\t\t\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</DropdownMenu>\n\t\t\t\t</Toolbar>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default BlockSettingsMenu;\n"]}